# CI/CD
- **challenge** <br>
  - Multi region, multi project로 구성되어 있는 eks 서비스들을 수동으로 sync 하기 어려움 <br>
  - 배포 과정을 일관화된 방법으로 체계적으로 관리하고 자동화할 필요성 <br>
- **solution** <br>
  - CircleCi를 통한 애플리케이션 빌드 후 ArgoCD를 통한 k8s 배포
- **pros** <br>
  - 배포 과정을 조금 더 체계적으로 관리하고 단일화하여 human error 방지
  - 배포 환경이 버전별로 관리되기 떄문에 배포 상태를 쉽게 파악할 수 있어 안정적으로 production 환경에 배포 가능
  - 원하는 배포 상태에 맞추어 자가 치유 및 이상 탐지 가능
- **cons** <br>
  - k8s 환경에서만 ArgoCD를 사용할 수 있음
  - git 서비스의 장애를 고려해야 함

# Auto Scaling
- **challenge** <br>
  - 서비스 부하가 불규칙한 상황에서 고정된 개수의 instance를 운영하는 것은 비효율적인 상황 <br>
  - 부하가 집중되는 상황에서는 인스턴스 개수를 늘리고, 그 외의 상황에서는 최소화하는 방식으로 유연하게 운영할 필요성 <br>
- **solution** <br>
  - Karpenter는 AWS EKS 환경에서 동작하는 오픈소스 자동 스케일링 솔루션으로, 빠른 노드 프로비저닝과 효율적인 리소스 활용을 제공 <br>
- **pros** <br>
  - 빠른 노드 생성: 신속하게 노드를 증설하여, 갑작스러운 트래픽 증가에도 빠르게 대응할 수 있음
  - 커스텀 가능한 스케일링 정책: 특정 워크로드(예: CPU 집약, 메모리 집약)에 맞춰 태그나 라벨을 기반으로 노드를 생성 가능
  - 프로비저닝 효율성: 필요 리소스에 정확히 맞춰 노드를 생성하므로, 오버프로비저닝을 줄이고 비용을 절감할 수 있음
  - 프라이싱 옵션 연동: AWS 스팟 인스턴스 등을 활용하여, 동일한 성능을 보다 저렴한 비용으로 운영 가능.

# Deployment Strategy
- **challenge** <br>
  - Rolling update 사용시 안정적이고 높은 서비스 가용성을 유지할 수 있지만 배포시간이 길고 롤백이 어려움 <br>
- **options** <br>
  - blue/green <br>
    - "Blue"(현재 서비스 중인 버전)와 "Green"(새 버전) 환경을 완전히 분리하여 운영 <br>
      - Green 환경에서 새로운 버전이 준비되면, 트래픽 라우팅을 Blue에서 Green으로 순간적으로 전환 <br>
    - pros
      - 롤백이 매우 간단(트래픽을 다시 Blue로 돌리면 됨)
      - 기존 환경과 별도로 새 버전을 테스트하므로 품질 보장에 유리
    - cons
      - 두 세트의 환경(인프라)을 동시에 운영해야 하므로 비용이 많이 들 수 있음
      - 배포 시점에 트래픽이 한꺼번에 새 버전으로 바뀌므로, 예상치 못한 이슈가 발생할 경우 전면에 영향을 줄 수 있음
  - canary <br>
    - 소수의 사용자(또는 트래픽)에게만 새 버전을 먼저 배포하여 검증 후, 점진적으로 전체 트래픽을 새 버전으로 전환
    - pros
      - 위험 분산: 초기 트래픽이 적기 때문에, 문제가 생겨도 영향 범위가 작음
      - 점진적 적용: 문제를 빠르게 파악하고, 필요시 빠른 롤백이 가능
    - cons
      - 트래픽 라우팅 설정이 복잡해질 수 있음(인그레스 컨트롤러, 서비스 메시 등을 이용)
      - 배포 전략이 길어질 수 있으므로, 타임라인 관리가 필요
  - A/B testing <br>
    - Canary와 유사하지만, 단순 버전 배포가 아닌 기능이나 UI가 다른 두 버전을 병렬로 노출함으로써, 사용자 반응 및 데이터를 분석하여 어느 쪽이 더 효율적인지 판단하는 방식
    - pros
      - 사용자 데이터를 활용해 제품 또는 기능의 효과를 직접 검증 가능
      - 개선된 사용자 경험(UX)을 빠르게 테스트하고, 의사결정에 활용 가능
    - cons
      - 트래픽을 분배하고 결과를 측정하기 위한 추가적인 분석 도구, 추적 도구(analytics & monitoring)가 필수
      - 사용자 집단 샘플링 및 환경(브라우저, 지역 등)에 따라 테스트 결과가 왜곡될 수 있으므로 면밀한 모니터링과 검증이 필요
